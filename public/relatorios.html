<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relat√≥rios - Gest√£o de Oficina</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="p-4 md:p-8 bg-gray-50"> <div class="max-w-7xl mx-auto">
        <header class="mb-8">
            <a href="index.html" class="text-blue-600 hover:text-blue-800 font-medium">&larr; Voltar</a>
            <h1 class="text-4xl font-bold text-gray-800 mt-2">Relat√≥rios Financeiros üìà</h1>
        </header>

        <div class="bg-white p-6 rounded-lg shadow-md mb-4 border border-gray-200">
            <form id="form-relatorio-dre" class="flex flex-col gap-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="data-inicio" class="block text-sm font-bold text-gray-700 mb-1">Data In√≠cio:</label>
                        <input type="date" id="data-inicio" class="form-input w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label for="data-fim" class="block text-sm font-bold text-gray-700 mb-1">Data Fim:</label>
                        <input type="date" id="data-fim" class="form-input w-full border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500">
                    </div>
                </div>

                <hr class="border-gray-100">

                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                    
                    <button type="submit" id="btn-gerar-dre"
                        class="bg-white border-l-4 border-blue-600 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">üìä</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-blue-700">DRE Financeiro</span>
                    </button>

                    <button type="button" id="btn-gerar-vendas"
                        class="bg-white border-l-4 border-purple-600 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">üí∞</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-purple-700">Relat√≥rio Vendas</span>
                    </button>

                    <button type="button" id="btn-gerar-produtos"
                        class="bg-white border-l-4 border-green-600 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">üì¶</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-green-700">Top Produtos</span>
                    </button>

                    <button type="button" id="btn-gerar-servicos"
                        class="bg-white border-l-4 border-indigo-600 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">üîß</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-indigo-700">Ranking Servi√ßos</span>
                    </button>

                    <button type="button" id="btn-gerar-clientes"
                        class="bg-white border-l-4 border-teal-600 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">üë•</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-teal-700">Top Clientes</span>
                    </button>

                    <button type="button" id="btn-gerar-stock"
                        class="bg-white border-l-4 border-yellow-500 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">‚ö†Ô∏è</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-yellow-700">Stock Baixo</span>
                    </button>

                    <button type="button" id="btn-gerar-performance"
                        class="bg-white border-l-4 border-pink-600 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">üèÜ</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-pink-700">Performance Equipe</span>
                    </button>

                    <button type="button" id="btn-gerar-auditoria"
                        class="bg-white border-l-4 border-red-600 p-4 rounded-lg shadow hover:shadow-md transition-transform hover:scale-105 flex flex-col items-center justify-center gap-2 group">
                        <span class="text-3xl group-hover:scale-110 transition-transform">üïµÔ∏è</span>
                        <span class="text-sm font-bold text-gray-700 group-hover:text-red-700">Auditoria & Pre√ßos</span>
                    </button>

                </div>
            </form>
        </div>

        <div id="feedback-alert" class="hidden"></div>

        <div id="area-relatorio" class="bg-white p-8 rounded-lg shadow-lg min-h-[300px] border border-gray-200 text-center">
            <p class="text-gray-400 mt-10 text-lg">Selecione um per√≠odo e clique num card acima para gerar o relat√≥rio.</p>
        </div>
    </div>

    <div id="modal-detalhes-venda" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-4">
                <h3 class="text-xl font-bold text-gray-800">Detalhes da Venda #<span id="detalhe-id"></span></h3>
                <button id="btn-fechar-detalhes" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div class="space-y-2 text-sm text-gray-700 mb-4 bg-gray-50 p-3 rounded">
                <p><strong>Data:</strong> <span id="detalhe-data"></span></p>
                <p><strong>Cliente:</strong> <span id="detalhe-cliente"></span></p>
                <p><strong>Pagamento:</strong> <span id="detalhe-pagamento"></span></p>
            </div>
            <h4 class="font-bold mb-2 border-b pb-1">Itens Vendidos</h4>
            <ul id="detalhe-lista-itens" class="list-disc list-inside space-y-1 text-sm mb-4 text-gray-600"></ul>
            <div class="text-right space-y-1 pt-3 border-t">
                <p id="detalhe-subtotal" class="text-gray-500"></p>
                <p id="detalhe-desconto" class="text-green-600 font-bold"></p>
                <p id="detalhe-acrescimo" class="text-red-600 font-bold"></p>
                <p class="text-xl font-bold text-gray-800">Total: <span id="detalhe-total"></span></p>
            </div>
            <div class="mt-6 flex justify-end">
                <button type="button" id="btn-imprimir-recibo-modal" class="bg-gray-800 hover:bg-gray-900 text-white font-bold py-2 px-4 rounded flex items-center">
                    <span>&#128424;</span>&nbsp; Imprimir Recibo
                </button>
            </div>
        </div>
    </div>

    <template id="relatorio-template">
        <style>
            body { font-family: sans-serif; padding: 20px; color: #333; }
            .header { display: flex; justify-content: space-between; border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 20px; }
            .report-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
            .report-table th, .report-table td { padding: 8px; border-bottom: 1px solid #eee; text-align: left; }
            .report-table th { background-color: #f3f4f6; font-weight: bold; }
        </style>
        <div class="relatorio-box">
            <div class="header">
                <div><h1 data-relatorio="empresa-nome">Empresa</h1><p data-relatorio="empresa-endereco">Endere√ßo</p></div>
                <div class="text-right"><h2 data-relatorio="titulo">Relat√≥rio</h2><p>Per√≠odo: <span data-relatorio="periodo"></span></p></div>
            </div>
            <div id="relatorio-conteudo-pdf"></div>
        </div>
    </template>

    <script src="js/relatorios.js"></script>
</body>
</html>